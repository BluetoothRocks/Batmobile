<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Bluetooth Rocks! — Batmobile</title>

		<link rel="manifest" href="manifest.json">

		<link rel="stylesheet" href="index.css">
		<link rel="stylesheet" href="common.css">

		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="theme-color" content="#8cc63f">
	</head>
	
	<body class='control'>
		<div class='content'>
			<div class='racer'>		
				<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1150">
					<g id="batmobile">
						<g>
							<g id="tires">
								<path fill="#231F20" d="M859.9,508.5c0,0,19.6-63.9,17.3-115.8s-17.3-102.3-17.3-102.3l-17.3,17.6l1.7,200.6L859.9,508.5z"/>
								<polygon fill="#231F20" points="871.8,676 850.5,621.6 828.8,613.7 808.1,676 		"/>
								<path fill="#231F20" d="M140.1,508.5c0,0-19.6-63.9-17.3-115.8c2.3-51.9,17.3-102.3,17.3-102.3l17.3,17.6l-1.7,200.6L140.1,508.5z
									"/>
								<polygon fill="#231F20" points="128.2,676 149.5,621.6 171.2,613.7 191.9,676 		"/>
							</g>
							<g id="sidepods">
								<g>
									
										<rect x="653.4" y="297.9" transform="matrix(-1 -3.464102e-07 3.464102e-07 -1 1495.9636 664.5689)" fill="#414042" width="189.2" height="68.7"/>
									
										<rect x="658.3" y="362.2" transform="matrix(-1 -3.464102e-07 3.464102e-07 -1 1412.0109 819.8552)" fill="#6D6E71" width="95.4" height="95.5"/>
									<polygon fill="#333132" points="658.5,726.9 743.9,726.9 770.7,618.4 770.7,352.8 719.8,352.8 658.5,460.2 			"/>
									
										<rect x="770.7" y="320.2" transform="matrix(-1 -3.464102e-07 3.464102e-07 -1 1626.9912 831.463)" fill="#6D6E71" width="85.6" height="191.1"/>
									<polygon fill="#414042" points="756.5,676 808.1,676 819.7,511.3 819.7,463.9 770.7,463.9 770.7,618.4 			"/>
									<polygon fill="#4D4D4F" points="859.9,472 859.9,520.2 808.1,676 819.7,511.3 819.7,463.9 			"/>
									<polygon fill="#414042" points="819.7,409.5 819.7,352.8 808.1,314.8 764.4,314.8 770.7,352.8 770.7,409.5 			"/>
									<polygon fill="#4D4D4F" points="859.9,366.6 808.1,314.8 819.7,352.8 819.7,409.5 859.9,418.4 			"/>
								</g>
								<g>
									<rect x="157.4" y="297.9" fill="#414042" width="189.2" height="68.7"/>
									<rect x="246.3" y="362.2" fill="#6D6E71" width="95.4" height="95.5"/>
									<polygon fill="#333132" points="341.5,726.9 256.1,726.9 229.3,618.4 229.3,352.8 280.2,352.8 341.5,460.2 			"/>
									<rect x="143.7" y="320.2" fill="#6D6E71" width="85.6" height="191.1"/>
									<polygon fill="#414042" points="243.5,676 191.9,676 180.3,511.3 180.3,463.9 229.3,463.9 229.3,618.4 			"/>
									<polygon fill="#4D4D4F" points="140.1,472 140.1,520.2 191.9,676 180.3,511.3 180.3,463.9 			"/>
									<polygon fill="#414042" points="180.3,409.5 180.3,352.8 191.9,314.8 235.6,314.8 229.3,352.8 229.3,409.5 			"/>
									<polygon fill="#4D4D4F" points="140.1,366.6 191.9,314.8 180.3,352.8 180.3,409.5 140.1,418.4 			"/>
								</g>
							</g>
							<g id="fenders">
								<g>
									<path fill="#231F20" d="M856.3,307.9c0,0,4.2-7.4,3.6-17.6s-1.8-13-1.8-13l-207,0l-1.7,30.5L856.3,307.9z"/>
									<polygon fill="#414042" points="658.3,261.3 658.5,191.6 651.1,134.5 637.8,100.5 682.4,100.5 699.3,137.1 705.6,191.6 
										705.6,261.3 			"/>
									<polygon fill="#4D4D4F" points="848.3,231.8 705.6,261.3 705.6,191.6 699.3,137.1 682.4,100.5 834,177.3 			"/>
									<polygon fill="#333132" points="852.7,277.3 651.1,277.3 651.1,261.3 705.6,261.3 848.3,231.8 843.8,244.3 			"/>
									<polygon fill="#231F20" points="637.8,100.5 634.2,108.6 651.1,261.3 658.3,261.3 658.5,191.6 651.1,134.5 			"/>
								</g>
								<g>
									<path fill="#231F20" d="M143.7,307.9c0,0-4.2-7.4-3.6-17.6s1.8-13,1.8-13l207,0l1.7,30.5L143.7,307.9z"/>
									<polygon fill="#414042" points="341.7,261.3 341.5,191.6 348.9,134.5 362.2,100.5 317.6,100.5 300.7,137.1 294.4,191.6 
										294.4,261.3 			"/>
									<polygon fill="#4D4D4F" points="151.7,231.8 294.4,261.3 294.4,191.6 300.7,137.1 317.6,100.5 166,177.3 			"/>
									<polygon fill="#333132" points="147.3,277.3 348.9,277.3 348.9,261.3 294.4,261.3 151.7,231.8 156.2,244.3 			"/>
									<polygon fill="#231F20" points="362.2,100.5 365.8,108.6 348.9,261.3 341.7,261.3 341.5,191.6 348.9,134.5 			"/>
								</g>
							</g>
							<g id="body">
								
									<rect x="337.4" y="932.2" transform="matrix(-1 -3.464102e-07 3.464102e-07 -1 991.7524 1944.6062)" fill="#6D6E71" width="317" height="80.2"/>
								
									<rect x="706" y="892.8" transform="matrix(-1 -3.464102e-07 3.464102e-07 -1 1448.4359 1812.7695)" fill="#231F20" width="36.4" height="27.2"/>
								
									<rect x="650.4" y="971.6" transform="matrix(-1 -3.464102e-07 3.464102e-07 -1 1348.4513 1990.8481)" fill="#231F20" width="47.7" height="47.7"/>
								
									<rect x="658.5" y="836.4" transform="matrix(-1 -3.464102e-07 3.464102e-07 -1 1367.6316 1823.6317)" fill="#231F20" width="50.6" height="150.7"/>
								<polygon fill="#231F20" points="709.1,987.2 605.8,993.4 605.8,511.3 658.5,511.3 658.5,942.5 709.1,939 		"/>
								
									<rect x="658.5" y="726.9" transform="matrix(-1 -3.464102e-07 3.464102e-07 -1 1373.0955 1563.2947)" fill="#6D6E71" width="56.1" height="109.6"/>
								<rect x="257.6" y="892.8" fill="#231F20" width="36.4" height="27.2"/>
								<rect x="301.9" y="971.6" fill="#231F20" width="47.7" height="47.7"/>
								<rect x="290.9" y="836.4" fill="#231F20" width="50.6" height="150.7"/>
								<polygon fill="#231F20" points="290.9,987.2 395.1,993.4 395.1,511.3 341.5,511.3 341.5,942.5 290.9,939 		"/>
								<rect x="285.4" y="726.9" fill="#6D6E71" width="56.1" height="109.6"/>
							</g>
							<g id="backdoor">
								<polygon fill="#231F20" points="646.7,1011.9 602.2,1063.8 602.2,1022.3 550,1022.3 550,1002.5 646.7,1002.5 		"/>
								
									<rect x="450" y="1002.5" transform="matrix(-1 -3.464102e-07 3.464102e-07 -1 999.9993 2024.8208)" fill="#A7A9AC" width="99.9" height="19.8"/>
								<polygon fill="#231F20" points="353.3,1011.9 397.8,1063.8 397.8,1022.3 450,1022.3 450,1002.5 353.3,1002.5 		"/>
								
									<rect x="397.8" y="1022.3" transform="matrix(-1 -3.464102e-07 3.464102e-07 -1 999.9993 2080.4282)" fill="#6D6E71" width="204.3" height="35.8"/>
							</g>
							<g id="nose">
								<g>
									<polygon fill="#414042" points="597.6,209.5 550.3,174.6 454.9,174.6 402.4,213.8 402.4,180.9 449.9,86.2 549.5,86.3 
										597.6,180.9 			"/>
									<polygon fill="#231F20" points="597.6,219.3 402.4,219.3 402.4,213.8 454.9,174.6 550.3,174.6 597.6,209.5 			"/>
								</g>
								<polygon fill="#3C3738" points="636.3,127.7 573.8,134 563,112.9 634.8,114.1 		"/>
								<polygon fill="#6F7173" points="641.2,171.4 595.3,176.4 573.8,134 636.3,127.7 		"/>
								<polygon fill="#58595B" points="651.1,284.6 651.1,261.3 641.2,171.4 595.3,176.4 597.6,180.9 597.6,219.3 585.4,219.3 		"/>
								<polygon fill="#3C3738" points="363.7,127.7 426.2,134 437,112.9 365.2,114.1 		"/>
								<polygon fill="#6F7173" points="358.8,171.4 404.7,176.4 426.2,134 363.7,127.7 		"/>
								<polygon fill="#58595B" points="348.9,284.6 348.9,261.3 358.8,171.4 404.7,176.4 402.4,180.9 402.4,219.3 418.8,219.3 		"/>
							</g>
							<g id="nacelles">
								<g>
									<path fill="#E6AF23" d="M207,1028.2l4.9,26.1c0,0,8.6,5,16.2,3.6c7.7-1.4,14-5.4,14-5.4l2.3-24.3H207z"/>
									<polygon fill="#4D4D4F" points="75,961.3 75,880 174.1,895.6 174.1,983.6 			"/>
									<polygon fill="#414042" points="211.9,941.7 211.9,901.5 174.1,895.6 174.1,983.6 			"/>
									<polygon fill="#4D4D4F" points="211.9,941.7 257.6,931.8 257.6,897.5 211.9,901.5 			"/>
									<path fill="#333132" d="M169.6,982.6l0,38.3c0,0,0,11.3,31.9,11.7s78.8-5,79.2-16.7s0-76.9,0-84.2S257.6,920,257.6,920l0,11.8
										l-45.7,9.8l-37.8,42L169.6,982.6z"/>
									<polygon fill="#414042" points="294,894.3 294,732.7 253.4,676 116,676 84.8,722 75,776.5 211.9,785.2 211.9,901.5 			"/>
									<polygon fill="#4D4D4F" points="75,880 211.9,901.5 211.9,785.2 75,776.5 			"/>
								</g>
								<g>
									<path fill="#E6AF23" d="M793,1028.2l-4.9,26.1c0,0-8.6,5-16.2,3.6c-7.7-1.4-14-5.4-14-5.4l-2.3-24.3H793z"/>
									<polygon fill="#4D4D4F" points="925,961.3 925,880 825.9,895.6 825.9,983.6 			"/>
									<polygon fill="#414042" points="788.1,941.7 788.1,901.5 825.9,895.6 825.9,983.6 			"/>
									<polygon fill="#4D4D4F" points="788.1,941.7 742.4,931.8 742.4,897.5 788.1,901.5 			"/>
									<path fill="#333132" d="M830.4,982.6v38.3c0,0,0,11.3-31.9,11.7c-32,0.5-78.8-5-79.2-16.7c-0.5-11.7,0-76.9,0-84.2
										c0-7.3,23.2-11.8,23.2-11.8v11.8l45.7,9.8l37.8,42L830.4,982.6z"/>
									<polygon fill="#414042" points="706,894.3 706,732.7 746.6,676 884,676 915.2,722 925,776.5 788.1,785.2 788.1,901.5 			"/>
									<polygon fill="#4D4D4F" points="925,880 788.1,901.5 788.1,785.2 925,776.5 			"/>
								</g>
							</g>
							<g id="capsule">
								<polygon fill="#414042" points="608.3,836.3 661.8,836.3 661.8,889 551.7,999.2 445.1,999.2 337.4,891.4 337.4,836.3 393.3,836.3 
									393.3,672 341.6,510.4 341.6,463.1 451.8,352.8 551.2,352.8 658.5,460.2 658.5,514.8 606.5,676 		"/>
								<g>
									<rect x="444.2" y="457.7" fill="#B82025" width="110.6" height="50"/>
									<g>
										
										<rect x="444.2" y="507.7" transform="matrix(-1 -3.464102e-07 3.464102e-07 -1 999.0541 1456.4949)" fill="#333132" width="110.6" height="441.1"/>
										<polygon fill="#231F20" points="554.8,561.3 554.8,671.1 499.1,726.9 444.2,671.9 444.2,561.3 				"/>
									</g>
								</g>
								<g>
									<polygon fill="#891215" points="658.5,460.2 661.8,295.2 554.8,188.9 551.2,352.8 			"/>
									<polygon fill="#B82025" points="451.8,188.9 451.8,352.8 551.2,352.8 554.8,188.9 			"/>
									<polygon fill="#CB252C" points="341.6,290.3 451.8,188.9 451.8,352.8 341.6,463.1 			"/>
								</g>
							</g>
						</g>
					</g>
				</svg>					
			</div>
		</div>

		<div class='connect'>
			<h1>
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 136"><path d="M55.48,33.58,66.69,44.82,55.49,56.06V33.58Zm0,68.83L66.69,91.17,55.49,79.93v22.48ZM43.51,68,19.28,43.63l7-7.05L45.61,56V9.53l35.1,35.21L57.53,68,80.72,91.25,45.61,126.47V80L26.3,99.42l-7-7L43.51,68ZM50,136c29.6,0,50-14.11,50-68S79.6,0,50,0,0,14.11,0,68s20.4,68,50,68Z"/></svg>
				Batmobile<em>!</em>
			</h1>
			<p>
				To use this demo you need a LEGO Powered Up Batmobile. Don't have one? <a id='emulate'>Emulate!</a>
			</p>

			<button id='connect'>Connect</button>
		</div>

		<div class='settings'>
			<div class='pills'>
				<button id='control'>Control</button>
				<button id='customize'>Customize</button>
			</div>
		
			<div class='views'>
				<div id='controlView'>
					<div id='controls'>
						<button id='button-forward' data-down='forward' data-up='stop'>▲&#xFE0E;</button>
						<button id='button-left' data-down='left' data-up='stop'>◀&#xFE0E;</button>
						<button id='button-right' data-down='right' data-up='stop'>▶&#xFE0E;</button>
						<button id='button-reverse' data-down='reverse' data-up='stop'>▼&#xFE0E;</button>
					</div>

					<div>
						<label>
							<input type='checkbox' id='turn'>Turn on the spot
						</label>
					</div>
				</div>
				
				<div id='customizeView'>

					<!-- 
						To make the CSS animations sync, we need to set up the --direction custom property,
						and assign it to the content property of the #car element. Then we can use
						getComputedStyle on every frame to get the current state of the car during the
						animation.
					-->
						
					<style>
						
						:root {
							--direction: 'stop';
						}
						
						#batmobile {
							content: var(--direction);
						}
						
					</style>			
			
					<style id='style' contenteditable='plaintext-only'>
	@keyframes track {
	  0%  { --direction: 'left'; }
	  10% { --direction: 'right'; }
	  20% { --direction: 'left'; }
	  30% { --direction: 'right'; }
	  40% { --direction: 'left'; }
	  50% { --direction: 'right'; }
	  58% { --direction: 'forward'; }
	  59% { --direction: 'reverse'; }
	  60% { --direction: 'left'; }
	  69% { --direction: 'forward'; }
	  70% { --direction: 'left'; }
	  79% { --direction: 'forward'; }
	  80% { --direction: 'left'; }
	  89% { --direction: 'forward'; }
	  90% { --direction: 'left'; }
	  99% { --direction: 'forward'; }
	}
	
	#batmobile {
	  animation: -track 10s infinite;
	  animation-delay: 2s;
	  animation-fill-mode: forwards;
	}
				</style>			
			</div>			
		</div>
		
		<script type="text/javascript" src="lib/poweredup.js"></script>
		<script type="text/javascript" src="lib/gamepad.js"></script>
		<script type="text/javascript" src="index.js"></script>
	</body>
</html>